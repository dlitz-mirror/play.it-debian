stages:
  - build
  - syntax

build_library:
  stage: build
  interruptible: true
  only:
    - master@play.it/scripts
    - /^staging-.*$/@play.it/scripts
    - tags@play.it/scripts
  script:
    - make
  artifacts:
    paths:
      - ./lib/libplayit2.sh

syntax_library:
  stage: syntax
  interruptible: true
  only:
    - master@play.it/scripts
    - /^staging-.*$/@play.it/scripts
    - tags@play.it/scripts
  script:
    - ./tests/syntax/library_shellcheck.sh

syntax_wrapper:
  stage: syntax
  interruptible: true
  only:
    - master@play.it/scripts
    - /^staging-.*$/@play.it/scripts
    - tags@play.it/scripts
  script:
    - ./tests/syntax/wrapper_shellcheck.sh
